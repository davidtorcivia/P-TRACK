{{ define "content" }}
<div style="max-width: 500px; margin: 2rem auto;">
    <article>
        <hgroup>
            <h1>Create Account</h1>
            <p>Register for Injection Tracker</p>
        </hgroup>

        <form hx-post="/api/auth/register"
              hx-target="#register-error"
              hx-swap="innerHTML"
              hx-indicator="#register-spinner"
              x-data="{ password: '', confirmPassword: '', passwordMatch: true }">

            <div id="register-error"></div>

            <label for="username">
                Username
                <input type="text"
                       id="username"
                       name="username"
                       placeholder="Choose a username"
                       required
                       autofocus
                       minlength="3"
                       maxlength="50">
                <small>3-50 characters, letters, numbers, and underscores only</small>
            </label>

            <label for="email">
                Email (optional)
                <input type="email"
                       id="email"
                       name="email"
                       placeholder="your@email.com">
                <small>For password recovery only</small>
            </label>

            <label for="password">
                Password
                <input type="password"
                       id="password"
                       name="password"
                       placeholder="Choose a strong password"
                       required
                       minlength="8"
                       x-model="password"
                       @input="passwordMatch = password === confirmPassword || confirmPassword === ''">
                <small>Minimum 8 characters</small>
            </label>

            <label for="confirm_password">
                Confirm Password
                <input type="password"
                       id="confirm_password"
                       name="confirm_password"
                       placeholder="Re-enter your password"
                       required
                       x-model="confirmPassword"
                       @input="passwordMatch = password === confirmPassword"
                       :aria-invalid="!passwordMatch && confirmPassword !== ''">
                <small x-show="!passwordMatch && confirmPassword !== ''" style="color: var(--pico-del-color);">
                    Passwords do not match
                </small>
            </label>

            <label for="agree">
                <input type="checkbox" id="agree" name="agree" required>
                I understand this is for personal use and not HIPAA compliant
            </label>

            <button type="submit" id="register-btn" :disabled="!passwordMatch">
                <span id="register-spinner" class="htmx-indicator">
                    <span aria-busy="true">Creating account...</span>
                </span>
                <span class="htmx-indicator-none">
                    Create Account
                </span>
            </button>
        </form>

        <footer>
            <small>
                Already have an account? <a href="/login">Log in here</a>
            </small>
        </footer>
    </article>

    <!-- Privacy Notice -->
    <article style="margin-top: 2rem;">
        <small>
            <strong>Privacy Notice:</strong> Your data is stored locally on your device/server.
            This application is intended for personal family use and stores sensitive medical information.
            Please ensure proper security measures are in place.
        </small>
    </article>
</div>

<style>
    .htmx-indicator {
        display: none;
    }
    .htmx-request .htmx-indicator {
        display: inline;
    }
    .htmx-request .htmx-indicator-none {
        display: none;
    }
</style>
{{ end }}