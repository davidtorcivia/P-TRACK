{{ define "content" }}
{{ if .ActiveCourse }}
<!-- Quick Actions -->
<div class="grid-3" style="margin-bottom: var(--space-6);">
    <a href="/injections" role="button" class="btn w-full">Log Injection</a>
    <a href="/symptoms" role="button" class="btn secondary w-full">Log Symptoms</a>
    <a href="/medications" role="button" class="btn outline w-full">Log Medication</a>
</div>

<!-- Welcome -->
<article class="card">
    <hgroup>
        <h2>{{ .ActiveCourse.Name }}</h2>
        <p>{{ if .LastInjection }}Last injection {{ .LastInjection.TimeAgo }}{{ end }}</p>
    </hgroup>
</article>

<!-- Low Stock -->
{{ if .LowStockItems }}
<article class="card">
    <header><strong>Low Stock Alerts</strong></header>
    {{ range .LowStockItems }}
    <p class="text-danger"><strong>{{ .ItemType }}:</strong> {{ .Quantity }} {{ .Unit }} remaining</p>
    {{ end }}
    <footer><a href="/inventory" role="button" class="btn-sm">Manage Inventory</a></footer>
</article>
{{ end }}

<!-- Recent Activity -->
<article class="card">
    <header>
        <h3>Recent Activity</h3>
    </header>
    <div id="recent-activity" hx-get="/api/dashboard/recent" hx-trigger="load">
        <p aria-busy="true">Loading...</p>
    </div>
    <footer>
        <a href="/activity" role="button" class="btn outline w-full">View All Activity</a>
    </footer>
</article>

<!-- Stats -->
<div class="grid-2">
    <div>
        <h3>Statistics</h3>
        <article class="stat-card">
            <div class="stat-value">{{ .Stats.TotalInjections }}</div>
            <div class="stat-label">Total Injections</div>
            <div style="margin-top: var(--space-2); color: var(--color-text-secondary); font-size: var(--text-sm);">
                Left: <strong>{{ .Stats.LeftCount }}</strong> | Right: <strong>{{ .Stats.RightCount }}</strong>
            </div>
        </article>
    </div>

    <div>
        <h3>Course Info</h3>
        <article class="card">
            <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                <div>
                    <span style="color: var(--color-text-secondary); font-size: var(--text-sm);">Name</span><br>
                    <strong>{{ .ActiveCourse.Name }}</strong>
                </div>
                <div>
                    <span style="color: var(--color-text-secondary); font-size: var(--text-sm);">Start Date</span><br>
                    <strong>{{ .ActiveCourse.StartDate }}</strong>
                </div>
                {{ if .ActiveCourse.ExpectedEndDate }}
                <div>
                    <span style="color: var(--color-text-secondary); font-size: var(--text-sm);">Expected End</span><br>
                    <strong>{{ .ActiveCourse.ExpectedEndDate }}</strong>
                </div>
                {{ end }}
            </div>
            <footer><a href="/courses" role="button" class="btn outline w-full">Manage</a></footer>
        </article>
    </div>
</div>

{{ else }}
<!-- No Course -->
<article class="card" style="text-align: center; padding: var(--space-8);">
    <hgroup>
        <h2>Welcome to Injection Tracker</h2>
        <p>Create your first course to get started</p>
    </hgroup>
    <a href="/courses" role="button" class="btn btn-lg">Create Course</a>
</article>
{{ end }}
{{ end }}
