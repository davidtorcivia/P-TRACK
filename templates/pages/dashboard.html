{{ define "content" }}
{{ if .ActiveCourse }}
<!-- Quick Actions -->
<div class="grid-3">
    <a href="/injections" role="button">Log Injection</a>
    <a href="/symptoms" role="button" class="secondary">Log Symptoms</a>
    <a href="/medications" role="button" class="outline">Log Medication</a>
</div>

<!-- Welcome -->
<article>
    <hgroup>
        <h2>{{ .ActiveCourse.Name }}</h2>
        <p>{{ if .LastInjection }}Last injection {{ .LastInjection.TimeAgo }}{{ end }}</p>
    </hgroup>
</article>

<!-- Low Stock -->
{{ if .LowStockItems }}
<article>
    <header><strong>Low Stock Alerts</strong></header>
    {{ range .LowStockItems }}
    <p><strong>{{ .ItemType }}:</strong> {{ .Quantity }} {{ .Unit }} remaining</p>
    {{ end }}
    <footer><a href="/inventory" role="button">Manage Inventory</a></footer>
</article>
{{ end }}

<!-- Recent Activity -->
<article>
    <header>
        <h3>Recent Activity</h3>
    </header>
    <div id="recent-activity" hx-get="/api/dashboard/recent" hx-trigger="load">
        <p aria-busy="true">Loading...</p>
    </div>
    <footer>
        <a href="/activity" role="button" class="outline">View All Activity</a>
    </footer>
</article>

<!-- Stats -->
<div class="grid-2">
    <div>
        <h3>Statistics</h3>
        <article class="stat-card">
            <div class="stat-value">{{ .Stats.TotalInjections }}</div>
            <div class="stat-label">Total Injections</div>
            <small>Left: {{ .Stats.LeftCount }} | Right: {{ .Stats.RightCount }}</small>
        </article>
    </div>

    <div>
        <h3>Course Info</h3>
        <article>
            <p><strong>Name:</strong> {{ .ActiveCourse.Name }}</p>
            <p><strong>Start:</strong> {{ .ActiveCourse.StartDate }}</p>
            {{ if .ActiveCourse.ExpectedEndDate }}
            <p><strong>Expected End:</strong> {{ .ActiveCourse.ExpectedEndDate }}</p>
            {{ end }}
            <footer><a href="/courses" role="button" class="outline">Manage</a></footer>
        </article>
    </div>
</div>

{{ else }}
<!-- No Course -->
<article style="text-align: center;">
    <hgroup>
        <h2>Welcome to Injection Tracker</h2>
        <p>Create your first course to get started</p>
    </hgroup>
    <a href="/courses" role="button">Create Course</a>
</article>
{{ end }}
{{ end }}
