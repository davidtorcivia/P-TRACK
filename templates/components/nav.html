{{define "nav"}}
<!-- Navigation Component -->
<nav class="container-fluid" x-data="{ mobileMenuOpen: false }">
    <ul>
        <li>
            <a href="/" class="nav-brand">
                <strong>Injection Tracker</strong>
            </a>
        </li>
    </ul>

    <!-- Desktop Navigation -->
    <ul class="desktop-nav">
        {{if .IsAuthenticated}}
            <li><a href="/dashboard">Dashboard</a></li>
            <li><a href="/injections">Injections</a></li>
            <li><a href="/symptoms">Symptoms</a></li>
            <li><a href="/medications">Medications</a></li>
            <li><a href="/inventory">Inventory</a></li>
            <li><a href="/courses">Courses</a></li>
            <li><a href="/calendar">Calendar</a></li>
            <li>
                <details>
                    <summary>{{.CurrentUser}}</summary>
                    <ul>
                        <li><a href="/settings">Settings</a></li>
                        <li><a href="/profile">Profile</a></li>
                        <li>
                            <a href="#"
                               hx-post="/api/auth/logout"
                               hx-target="body"
                               hx-headers='{"X-CSRF-Token": "{{.CSRFToken}}"}'>
                                Logout
                            </a>
                        </li>
                    </ul>
                </details>
            </li>
        {{else}}
            <li><a href="/login">Login</a></li>
            <li><a href="/register">Register</a></li>
        {{end}}
    </ul>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle"
            @click="mobileMenuOpen = !mobileMenuOpen"
            aria-label="Toggle menu">
        <span x-show="!mobileMenuOpen">☰</span>
        <span x-show="mobileMenuOpen">✕</span>
    </button>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" x-show="mobileMenuOpen" @click.outside="mobileMenuOpen = false">
        <ul>
            {{if .IsAuthenticated}}
                <li><a href="/dashboard" @click="mobileMenuOpen = false">Dashboard</a></li>
                <li><a href="/injections" @click="mobileMenuOpen = false">Injections</a></li>
                <li><a href="/symptoms" @click="mobileMenuOpen = false">Symptoms</a></li>
                <li><a href="/medications" @click="mobileMenuOpen = false">Medications</a></li>
                <li><a href="/inventory" @click="mobileMenuOpen = false">Inventory</a></li>
                <li><a href="/courses" @click="mobileMenuOpen = false">Courses</a></li>
                <li><a href="/calendar" @click="mobileMenuOpen = false">Calendar</a></li>
                <li><hr></li>
                <li><a href="/settings" @click="mobileMenuOpen = false">Settings</a></li>
                <li><a href="/profile" @click="mobileMenuOpen = false">Profile</a></li>
                <li>
                    <a href="#"
                       hx-post="/api/auth/logout"
                       hx-target="body"
                       hx-headers='{"X-CSRF-Token": "{{.CSRFToken}}"}'>
                        Logout
                    </a>
                </li>
            {{else}}
                <li><a href="/login" @click="mobileMenuOpen = false">Login</a></li>
                <li><a href="/register" @click="mobileMenuOpen = false">Register</a></li>
            {{end}}
        </ul>
    </div>
</nav>

<style>
    nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .desktop-nav {
        display: flex;
        gap: 1rem;
        list-style: none;
        margin: 0;
        padding: 0;
    }

    .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.5rem;
    }

    .mobile-nav {
        display: none;
    }

    @media (max-width: 768px) {
        .desktop-nav {
            display: none;
        }

        .mobile-menu-toggle {
            display: block;
        }

        .mobile-nav {
            display: block;
            position: fixed;
            top: 60px;
            right: 0;
            bottom: 0;
            width: 80%;
            max-width: 300px;
            background-color: white;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            overflow-y: auto;
            z-index: 1000;
        }

        .mobile-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .mobile-nav li {
            margin: 1rem 0;
        }

        .mobile-nav a {
            color: var(--color);
            text-decoration: none;
            display: block;
            padding: 0.5rem 0;
        }

        .mobile-nav hr {
            margin: 1rem 0;
        }
    }
</style>
{{end}}